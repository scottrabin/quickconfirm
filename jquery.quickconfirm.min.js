/*

 jQuery Quick Confirm
 @version 0.9
 @author Scott Rabin
 MIT Licensed (jquery.org/license)
*/
(function(d){var k={arrow:{height:10,width:10,borderWidth:1},className:"",closeOnBlur:!0,contents:{text:"quickConfirm",proceed:"Proceed",cancel:"Cancel"},css:{position:"absolute"},onproceed:function(){d(this).quickConfirm("close")},oncancel:function(){d(this).quickConfirm("close")},position:"bottom",template:'<span>{{text}}</span><div style="overflow: hidden;"><button style="float: left;" onclick="$(this).quickConfirm(\'cancel\');">{{cancel}}</button><button style="float: right;" onclick="$(this).quickConfirm(\'proceed\');">{{proceed}}</button></div>',
renderTemplate:function(b,a){a=d.isPlainObject(a)?a:{};return(b||"").replace(/{{(.*?)}}/g,function(b,c){return a[c]})}},j="transparent";d(function(){var b=d("<div></div>").appendTo("body").hide().css("backgroundColor",j);j=b.css("backgroundColor");b.remove()});var i={getPosition:function(b,a,f,c){if("bottom"===b)return{left:a.outerWidth()/2-f,top:-c};if("top"===b)return{left:a.outerWidth()/2-f,top:a.outerHeight()-parseInt(a.css("borderTopWidth"),10)-parseInt(a.css("borderBottomWidth"),10)};if("right"===
b)return{left:-f,top:a.outerHeight()/2-c};if("left"===b)return{left:a.outerWidth()-parseInt(a.css("borderLeftWidth"),10)-parseInt(a.css("borderRightWidth"),10),top:a.outerHeight()/2-c}},getBorderColor:function(b,a){var f=["transparent","transparent","transparent","transparent"];"bottom"===b?f[2]=a:"top"===b?f[0]=a:"right"===b?f[1]=a:"left"===b&&(f[3]=a);return f.join(" ")},getBorderWidth:function(b,a,f){var c=[];"bottom"===b?c=[0,a,f,a]:"top"===b?c=[f,a,0,a]:"right"===b?c=[f,a,f,0]:"left"===b&&(c=
[f,0,f,a]);return c.concat("").join("px ")},getStyle:function(b,a,f,c,e){return d.extend({position:"absolute",height:0,width:0,borderStyle:"solid",borderWidth:i.getBorderWidth(b,a,f),borderColor:i.getBorderColor(b,c)},i.getPosition(b,e,a,f))}},h={init:function(b){var a=d.extend(!0,{},k,b);if(d.isPlainObject(a.contents))a.contents=a.renderTemplate(a.template,a.contents);return this.each(function(){var b=d(this);b.offset();var c=b.data("quickConfirm.element")||d(document.createElement("div"));c.data("quickConfirm.trigger",
b).appendTo("body").addClass("quickConfirm").addClass(a.className).html(a.contents).css(a.css).bind("proceed",a.onproceed).bind("cancel",a.oncancel);b.data("quickConfirm.element",c);a.closeOnBlur&&setTimeout(function(){d("body").on("click",function l(a){0===d(a.target).closest(c).length&&0===d(a.target).closest(b).length&&(b.quickConfirm("close"),d("body").off("click",l))})},1);var e={top:0,left:0},g=b.offset();switch(a.position){case "bottom":e.top=g.top+b.outerHeight();e.left=g.left+b.outerWidth()/
2-c.outerWidth()/2;break;case "top":e.top=g.top-c.outerHeight();e.left=g.left+b.outerWidth()/2-c.outerWidth()/2;break;case "right":e.top=g.top+b.outerHeight()/2-c.outerHeight()/2;e.left=g.left+b.outerWidth();break;case "left":e.top=g.top+b.outerHeight()/2-c.outerHeight()/2,e.left=g.left-c.outerWidth()}c.css(e);if(null!==a.arrow){e=d(document.createElement("div"));g=d(document.createElement("div"));c.append(g,e);var h=e.css("backgroundColor");e.addClass("quickConfirm-arrow").css(i.getStyle(a.position,
a.arrow.width,a.arrow.height,h===j?c.css("backgroundColor"):h,c));h=g.css("backgroundColor");g.addClass("quickConfirm-arrow-border").css(i.getStyle(a.position,a.arrow.width+a.arrow.borderWidth,a.arrow.height+a.arrow.borderWidth,h===j?c.css("border"+a.position.substr(0,1).toUpperCase()+a.position.substr(1)+"Color"):h,c));e="";"bottom"===a.position?e={marginTop:a.arrow.height+2}:"top"===a.position?e={marginTop:-(a.arrow.height+2)}:"right"===a.position?e={marginLeft:a.arrow.width+2}:"left"===a.position&&
(e={marginLeft:-(a.arrow.width+2)});c.css(e)}})},defaults:function(b){return b?(d.extend(!0,k,b),this):k},close:function(b){var b=d(b||this),a=h.dialog(b);a&&(b.removeData("quickConfirm.element"),a.remove());return this},dialog:function(b){for(var b=d(b||this),a;0<b.length;){b.data("quickConfirm.trigger")&&(b=b.data("quickConfirm.trigger"));if(null!=(a=b.data("quickConfirm.element")))break;b=b.parent()}return a},proceed:function(){var b=h.dialog(this);b&&b.trigger("proceed");return this},cancel:function(){var b=
h.dialog(this);b&&b.trigger("cancel");return this}};d.fn.quickConfirm=function(b){if(b&&h[b])return h[b].apply(this,Array.prototype.slice.call(arguments,1));if(d.isPlainObject(b)||!b)return h.init.apply(this,arguments);console&&console.error?console.error("Invalid arguments to jQuery.quickConfirm:",arguments):d.error("Invalid arguments to jQuery.quickConfirm: "+Array.prototype.join.call(arguments,", "))}})(jQuery);
